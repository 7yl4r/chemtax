Things I did to get this running:

`install.packages("devtools")` in an ipynb errors out.
The internet suggested a lot of things, so I tried them all.

```bash
sudo apt-get -y build-dep libcurl4-gnutls-dev && sudo apt-get -y install libcurl4-gnutls-dev
sudo apt install r-cran-devtools
sudo conda install -c r r-devtools 
```

Still getting "no package called 'devtools'" error.
Now trying using the output generated by `pak::pkg_system_requirements("devtools", "ubuntu", "18.04")`.

```bash
sudo apt-get install -y software-properties-common && \
  sudo add-apt-repository-y ppa:cran/libgit2 && \
  sudo apt-get update && \
  sudo apt-get install -y libfreetype6-dev libfribidi-dev libharfbuzz-dev git libxml2-dev libfontconfig1-dev libgit2-dev pandoc libicu-dev libcurl4-openssl-dev libssl-dev libjpeg-dev libpng-dev libtiff-dev make z
```

Same issue.
Starting now from an R session started from the terminal.
`install.packages('devtools')` throws a lot of errors so I am going through them one by one manually.

```R
> install.packages('xfun', upgrade=TRUE)
> install.packages('htmltools', upgrade=TRUE)
...
```
 
Got stuck at [this `r-agg`-related issue](https://stackoverflow.com/questions/68824450/error-configuration-failed-for-package-ragg).
It seems that the R C compiler under conda environment can not call system `pkg-config` correctly.
Was able to move forward by installing with conda:

```bash
sudo mamba install -c conda-forge r-ragg
```

Back into R

```R
install.packages('devtools')  # enter yes to use personal lib
```

Now (finally) getting a 404 error from devtools::install_github() because the github repo is private.
So let's install from local dir:

```bash
git@github.com:AndyMcKenzieFromNZ/phytoclass.git
```

```R
devtools::install_local("../phytoclass")
```

Loads fine; throws an error while running now:
```R
library(phytoclass)
phytoclass::simulated_annealing(S = S,F=F,niter = 500,step = 0.009)
```

```
Error in subset.default(F, select = c(colnames(S))): argument "subset" is missing, with no default
Traceback:

1. phytoclass::simulated_annealing(S = S, F = F, niter = 500, step = 0.009)
2. Matrix_checks(S, F)
3. subset(F, select = c(colnames(S)))
4. subset.default(F, select = c(colnames(S)))
```
